{"mappings":"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","sources":["src/js/already-read.js"],"sourcesContent":["let today = new Date();\nconst date =\n  today.getDate() < 10\n    ? today.getDate().toString().padStart(2, 0)\n    : today.getDate();\nconst month =\n  today.getMonth() < 10\n    ? (today.getMonth() + 1).toString().padStart(2, 0)\n    : today.getMonth() + 1;\nconst year = today.getFullYear();\nconst dateNow = `${date}/${month}/${year}`;\n\nconst readWrapperEl = document.querySelector('.read-wrapper');\n\nif (localStorage.getItem('read')) {\n  updateMarkup();\n}\n\nreadWrapperEl.addEventListener('click', handleHideBtnClick);\nreadWrapperEl.addEventListener('click', handleReadMoreBtnClick);\n\nfunction updateMarkup() {\n  const localKeyArr = JSON.parse(localStorage.getItem('read'));\n  localKeyArr\n    .sort((prev, next) => prev.localeCompare(next))\n    .forEach(element => {\n      const dateNews = element;\n      const localNewsArr = JSON.parse(localStorage.getItem(`${element}`));\n      createMarkupFromLocal(localNewsArr, dateNews);\n    });\n}\n\nfunction createMarkupFromLocal(newsArrey, newsArrDate) {\n  let itemMarkup = '';\n  let idFromLocal = [];\n\n  const liMarkup = newsArrey\n    .map(item => {\n      if (localStorage.getItem('already read id')) {\n        idFromLocal = JSON.parse(localStorage.getItem('already read id'));\n      }\n\n      if (idFromLocal.includes(item.id)) {\n        itemMarkup = ' overlay-shown';\n      } else {\n        itemMarkup = '';\n      }\n      return ` <li class=\"images read-item\">\n    <img class=\"news-list__img\" src=\"${\n      item.imgUrl\n    }\" alt=\"\" width=\"288px\" height=\"395px\" />\n    <p class=\"news-list__category\">${item.category}</p>\n    <button class=\"img-btn favorite-false\" data-id=\"${\n      item.id\n    }\">Add to favorite</button>\n    <h2 class=\"description-title\">${item.title}</h2>\n    <p class=\"description-of-news\">${item.descr}</p>\n    <div class=\"info-more\">\n      <p class=\"date\" data-date=\"${item.dateKey}\">${item.date}</p>\n      <a class=\"already-read-link\" href=\"${\n        item.originUrl\n      }\" target=\"_blank\" rel=\"noopener noreferrer\">Read more</a>\n    </div>\n    <div class=\"read-overlay${itemMarkup}\" data-id=\"${item.id.slice(\n        14,\n        22\n      )}\"><p class=\"overlay-read-text\">Have read</p></div>\n    </li>`;\n    })\n    .join('');\n\n  setTimeout(() => {\n    if (!localStorage.getItem('savedNews')) {\n      return;\n    }\n    const favoriteBtn = document.querySelectorAll('.img-btn');\n    favoriteBtn.forEach(item => {\n      if (\n        JSON.parse(localStorage.getItem('savedNews')).find(elem => {\n          return elem.uri === String(item.dataset.id);\n        })\n      ) {\n        item.classList.add('favorite-true');\n        item.classList.remove('favorite-false');\n        item.textContent = 'Remove from favorite';\n      }\n    });\n  }, 500);\n  const markup = `<div class=\"read-list-box\">\n    <div class=\"read-box-inner\">\n    <p class=\"read-date\">${newsArrDate}</p>\n    <button class=\"read-btn roll-down\">\n    </button></div>\n    <ul class=\"news__list read-list\">${liMarkup}</ul></div>`;\n  readWrapperEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction handleHideBtnClick(e) {\n  if (!e.target.classList.contains('read-btn')) {\n    return;\n  }\n\n  if (e.target.classList.contains('roll-down')) {\n    e.target.parentNode.nextElementSibling.classList.add('visually-hidden');\n    e.target.classList.remove('roll-down');\n    e.target.classList.add('roll-up');\n    return;\n  }\n\n  if (e.target.classList.contains('roll-up')) {\n    e.target.parentNode.nextElementSibling.classList.remove('visually-hidden');\n    e.target.classList.remove('roll-up');\n    e.target.classList.add('roll-down');\n  }\n}\n\nfunction handleReadMoreBtnClick(e) {\n  if (e.target.classList.contains('already-read-link')) {\n    const newsId = e.target.parentNode.parentNode.children[2].dataset.id;\n\n    if (localStorage.getItem(`already read id`)) {\n      const idFromLocal = JSON.parse(localStorage.getItem(`already read id`));\n      idFromLocal.push(newsId);\n      localStorage.setItem('already read id', JSON.stringify(idFromLocal));\n    } else {\n      const idToLocal = [];\n      idToLocal.push(newsId);\n      localStorage.setItem('already read id', JSON.stringify(idToLocal));\n    }\n\n    const newsReadingDate = e.target.previousElementSibling.dataset.date;\n    const localArr = JSON.parse(localStorage.getItem(`${newsReadingDate}`));\n    const newsItem = localArr.find(item => item.id === newsId);\n    const indexOfNews = localArr.indexOf(newsItem);\n\n    localArr.splice(indexOfNews, 1);\n    localStorage.setItem(`${newsReadingDate}`, JSON.stringify(localArr));\n    newsItem.dateKey = dateNow;\n\n    if (localStorage.getItem(`${dateNow}`)) {\n      const fromLocal = JSON.parse(localStorage.getItem(`${dateNow}`));\n      fromLocal.push(newsItem);\n      localStorage.setItem(`${dateNow}`, JSON.stringify(fromLocal));\n      readWrapperEl.innerHTML = '';\n      updateMarkup();\n    } else {\n      localStorage.setItem(`${dateNow}`, JSON.stringify(newsItem));\n      readWrapperEl.innerHTML = '';\n      updateMarkup();\n    }\n  }\n}\n"],"names":["$af76a82433480073$var$today","Date","$af76a82433480073$var$date","getDate","toString","padStart","$af76a82433480073$var$month","getMonth","$af76a82433480073$var$year","getFullYear","$af76a82433480073$var$dateNow","concat","$af76a82433480073$var$readWrapperEl","document","querySelector","$af76a82433480073$var$updateMarkup","JSON","parse","localStorage","getItem","sort","prev","next","localeCompare","forEach","element","dateNews","newsArrey","newsArrDate","itemMarkup","idFromLocal","liMarkup","map","item","includes","id","imgUrl","category","title","descr","dateKey","date","originUrl","slice","join","setTimeout","querySelectorAll","find","elem","uri","String","dataset","classList","add","remove","textContent","markup","insertAdjacentHTML","$af76a82433480073$var$createMarkupFromLocal","addEventListener","e","target","contains","parentNode","nextElementSibling","newsId","children","push","setItem","stringify","idToLocal","newsReadingDate","previousElementSibling","localArr","newsItem","indexOfNews","indexOf","splice","fromLocal","innerHTML"],"version":3,"file":"read.1437129d.js.map"}